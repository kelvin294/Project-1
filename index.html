<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8">

<title>OASIS</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

<!-- ‚úÖ PWA META TAGS -->

<link rel="manifest" href="manifest.json">

<meta name="theme-color" content="#000000">

<meta name="mobile-web-app-capable" content="yes">

<meta name="apple-mobile-web-app-capable" content="yes">

<meta name="apple-mobile-web-app-status-bar-style" content="black">

<meta name="apple-mobile-web-app-title" content="OASIS">

<link rel="apple-touch-icon" href="icon-192x192.webp">

<link rel="icon" type="image/webp" sizes="1024x1024" href="icon-192x192.webp">

<link rel="icon" type="image/webp" sizes="512x512" href="icon-512x512.webp">

<!-- Stylesheet(CSS) -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<link rel="stylesheet" href="style.css">

<style>

body {

margin: 0;

font-family: Arial, sans-serif;

background-color: black;

color: white;

padding-top: 120px;

}

header {

background-color: black;

display: flex;

align-items: center;

padding: 1 20px;

justify-content: space-between;

position: fixed;

top: 0;

left: 0;

width: 100%;

z-index: 1000;

}

.logo {

font-size: 1.5em;

font-weight: bold;

}

.categories {

display: flex;

gap: 15px;

}

.categories span {

cursor: pointer;

position: relative;

}

.categories span::after {

content: "";

position: absolute;

bottom: -3px;

left: 0;

width: 0%;

height: 2px;

background: white;

transition: 0.3s;

}

.categories span:hover::after {

width: 100%;

}

.icons {

display: flex;

gap: 20px;

}

.icons i {

cursor: pointer;

font-size: 1.5em;

color: white;

}

/* Search + form */

.search-container {

display: flex;

justify-content: center;

margin: 15px;

flex-wrap: wrap;

}

.search-box {

position: relative;

}

.search-box input {

padding: 10px 35px 10px 15px;

width: 300px;

border-radius: 20px;

border: none;

outline: none;

}

.search-box i {

position: absolute;

right: 10px;

top: 10px;

color: #333;

}

.search-box button {

margin-left: 10px;

padding: 10px 20px;

border: none;

border-radius: 20px;

background-color: white;

color: black;

cursor: pointer;

font-weight: bold;

}

.emailjs-form {

position: fixed;

top: 100px;

right: -320px;

width: 300px;

background: white;

color: black;

padding: 15px;

border-radius: 10px;

transition: right 0.3s;

z-index: 999;

}

.emailjs-form.open {

right: 10px;

}

.emailjs-form input,

.emailjs-form textarea {

width: 100%;

padding: 8px;

margin: 8px 0;

border-radius: 5px;

border: 1px solid #ccc;

}

.emailjs-form button {

background: black;

color: white;

border: none;

padding: 10px;

width: 100%;

border-radius: 5px;

cursor: pointer;

}

.status-message {

text-align: center;

color: yellow;

margin-top: 10px;

font-size: 0.9em;

}

/* Mobile tweaks */

@media (max-width: 768px) {

.movie-row {

display: flex !important;

grid-template-columns: repeat(3, 0fr);

gap: 7px;

overflow-x: auto !important;

padding-left: 0;

padding-right: 0;

}

.movie {

flex: unset !important;

width: 100% !important;

}

.movie img {

width: 100% !important;

height: auto !important;

display: block;

border-radius: 6px;

}

.scroll-btn {

display: none !important;

}

}

@media screen and (max-width: 768px) {

header {

flex-direction: column;

align-items: flex-start;

gap: 2px;

}

.categories {

flex-wrap: wrap;

gap: 10px;

justify-content: center;

width: 100%;

padding-top: 10px;

}

.icons {

width: 100%;

justify-content: space-between;

}

.search-container {

flex-direction: column;

align-items: center;

gap: 10px;

margin: 10px;

}

.search-box input {

width: 80vw;

}

.search-box button {

width: 80vw;

margin-top: 10px;

}

.emailjs-form {

width: 90vw;

right: -100vw;

}

.emailjs-form.open {

right: 5vw;

}

body {

padding-top: 170px;

}

}

</style>

<style>

/* ‚úÖ Install button (no background / no container) */

#installBtn {

display: none;

border: none;

background: none;

color: blue;

text-decoration: underline;

font-size: 16px;

cursor: pointer;

margin-top: 10px;

}

/* ‚úÖ ADDED: Mobile Download button (link style) */

#downloadBtnMobile {

display: none;

border: none;

background: white;

color: blue;

text-decoration: underline;

font-size: 16px;

cursor: pointer;

margin-top: 10px;

}

</style>

</head>

<body>

<header>

<div class="logo" style="font-family: Pacifico, cursive; color: white; background-color: black; font-size: 50px;">OASIS</div>

<div class="categories">

<span><a href="Hollywood.html" style="text-decoration: none; color: white;">Hollywood</a></span>

<span><a href="Bollywood.html" style="text-decoration: none; color: white;">Bollywood</a></span>

<span><a href="Anime.html" style="text-decoration: none; color: white;">Anime</a></span>

<span><a href="Adult Movie(18).html" style="text-decoration: none; color: white;">Adult Movie(18)</a></span>

</div>

<div class="icons">

<i class="fa-solid fa-message" onclick="toggleEmailForm()" aria-label="Request a Movie"

style="font-size: 1.5em; padding: 5px; margin-right: 17px; color: white;"></i>

</div>

</header>

<!-- Search Bar -->

<div class="search-container">

<div class="search-box">

<input type="text" id="searchInput" placeholder="Search for a movie...">

<i class="fa fa-search"></i>

<button onclick="searchMovie()" id="searchButton">Search</button>

<div id="statusMsg" class="status-message"></div>

</div>

</div>

<!-- EmailJS Form -->

<div class="emailjs-form" id="emailForm">

<h3>Request a Movie</h3>

<input type="text" id="reqName" placeholder="Movie Name">

<textarea id="reqDesc" placeholder="Movie Description"></textarea>

<input type="email" id="reqEmail" placeholder="Your Email">

<button onclick="sendRequest()">Submit Movie</button>

</div>

<div id="movie-section" class="movie-esection"></div>

<!-- ‚úÖ Hidden Install Button -->

<button id="installBtn">üì• Install OASIS App</button>

<!-- ‚úÖ ADDED: Mobile-only Download Button -->

<button id="downloadBtnMobile">üì• Download OASIS App</button>

<script>

function toggleEmailForm() {

document.getElementById("emailForm").classList.toggle("open");

}

function searchMovie() {

const input = document.getElementById("searchInput").value.trim();

const statusMsg = document.getElementById("statusMsg");

if (input !== "") {

statusMsg.textContent = "";

localStorage.setItem("searchQuery", input);

window.location.href = "omdb.html";

} else {

statusMsg.textContent = "Please enter a movie name.";

}

}

document.addEventListener("DOMContentLoaded", function () {

const inputField = document.getElementById("searchInput");

inputField.addEventListener("keypress", function (e) {

if (e.key === "Enter") {

searchMovie();

}

});

});

</script>

<!-- EmailJS Script -->

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>

(function () {

emailjs.init("Garzf1S0EiiR35hyL"); // Replace with your actual EmailJS public key

})();

function sendRequest() {

const movieName = document.getElementById("reqName").value.trim();

const movieDesc = document.getElementById("reqDesc").value.trim();

const userEmail = document.getElementById("reqEmail").value.trim();

if (!movieName || !movieDesc || !userEmail) {

alert("Please fill in all fields.");

return;

}

const params = {

movie_name: movieName,

description: movieDesc,

user_email: userEmail

};

emailjs.send("Service_54o2juo", "template_7saioak", params)

.then(() => {

document.getElementById("emailForm").classList.remove("open");

document.getElementById("reqName").value = "";

document.getElementById("reqDesc").value = "";

document.getElementById("reqEmail").value = "";

const status = document.createElement("div");

status.className = "status-message";

status.textContent = "Movie request has been sent successfully!";

document.body.appendChild(status);

setTimeout(() => status.remove(), 3000);

})

.catch(err => {

console.error("EmailJS Error:", err);

alert("Failed to send. Try again.");

});

}

</script>

<!-- ‚úÖ SW + Notification + Restrict Adult -->

<script>

// ‚úÖ Register Service Worker

if ("serviceWorker" in navigator) {

window.addEventListener("load", () => {

navigator.serviceWorker.register("sw.js")

.then(reg => console.log("‚úÖ Service Worker registered:", reg.scope))

.catch(err => console.log("‚ùå Service Worker registration failed:", err));

});

}

// ‚úÖ Ask Notification Permission

function requestNotificationPermission() {

if ("Notification" in window && "serviceWorker" in navigator) {

Notification.requestPermission().then(permission => {

if (permission === "granted") {

console.log("‚úÖ Notifications allowed");

} else {

console.log("‚ùå Notifications denied");

}

});

}

}

requestNotificationPermission();

// ‚úÖ Detect standalone mode

function isStandalone() {

return (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true);

}

// ‚úÖ Detect mobile

function isMobile() {

return /Android|iPhone|iPad|iPod|Opera Mini|IEMobile/i.test(navigator.userAgent);

}

let deferredPrompt;

const installBtn = document.getElementById("installBtn");

// ‚úÖ Listen for install event

window.addEventListener("beforeinstallprompt", (e) => {

e.preventDefault();

deferredPrompt = e;

});

// ‚úÖ Handle Adult Movies restriction

document.addEventListener("DOMContentLoaded", () => {

const adultLinks = document.querySelectorAll("a[href*='Adult Movie(18).html']");

adultLinks.forEach(link => {

link.addEventListener("click", (e) => {

if (isMobile() && !isStandalone()) {

// üö´ Restrict on mobile browser

e.preventDefault();

// ‚úÖ Send message to SW to show notification

if (Notification.permission === "granted" && navigator.serviceWorker.controller) {

navigator.serviceWorker.controller.postMessage({

type: "SHOW_NOTIFICATION",

title: "OASIS App Required",

body: "‚ö†Ô∏è Adult Movies (18) are only available in the OASIS App. Please install the app to continue."

});

}

// ‚úÖ Show install button if prompt is ready

if (deferredPrompt) {

installBtn.style.display = "inline-block";

}

}

});

});

});

// ‚úÖ Install button click

installBtn.addEventListener("click", async () => {

if (deferredPrompt) {

deferredPrompt.prompt();

const { outcome } = await deferredPrompt.userChoice;

if (outcome === "accepted") {

console.log("‚úÖ User accepted the install prompt");

} else {

console.log("‚ùå User dismissed the install prompt");

}

deferredPrompt = null;

installBtn.style.display = "none";

}

});

</script>

<!-- ‚úÖ ADDED: Mobile-only download button logic + alert restriction (without changing your existing code) -->

<script>

// Reuse helpers/vars defined above

const downloadBtnMobile = document.getElementById("downloadBtnMobile");

// Show the download button on mobile browsers when not installed

document.addEventListener("DOMContentLoaded", () => {

if (isMobile() && !isStandalone()) {

downloadBtnMobile.style.display = "inline-block";

} else {

downloadBtnMobile.style.display = "none";

}

});

// When the browser says install is available, reveal both buttons on mobile

window.addEventListener("beforeinstallprompt", () => {

if (isMobile() && !isStandalone()) {

downloadBtnMobile.style.display = "inline-block";

installBtn.style.display = "inline-block";

}

});

// Click handler for the new Download button

downloadBtnMobile.addEventListener("click", async () => {

if (deferredPrompt) {

deferredPrompt.prompt();

const { outcome } = await deferredPrompt.userChoice;

if (outcome === "accepted") {

console.log("‚úÖ User accepted the install prompt via Download button");

downloadBtnMobile.style.display = "none";

installBtn.style.display = "none";

deferredPrompt = null;

return;

} else {

console.log("‚ùå User dismissed the install prompt via Download button");

deferredPrompt = null; // can only be used once

}

} else {

// Fallback for browsers that don't fire beforeinstallprompt

alert("Install not available yet. Please use your browser menu: Add to Home screen.");

}

});

// ADDITIONAL listener to enforce Adult 18+ restriction with an alert if not installed

document.addEventListener("DOMContentLoaded", () => {

const adultLinks2 = document.querySelectorAll("a[href*='Adult Movie(18).html']");

adultLinks2.forEach(link => {

link.addEventListener("click", (e) => {

if (isMobile() && !isStandalone()) {

e.preventDefault();

alert("‚ö†Ô∏è Adult Movies (18) are only available in the OASIS App. Please install the app to continue.");

// Make sure both buttons are visible so the user can install

downloadBtnMobile.style.display = "inline-block";

if (deferredPrompt) {

installBtn.style.display = "inline-block";

}

}

});

});

});

</script>

<script src="database.js"></script>

</body>

</html>